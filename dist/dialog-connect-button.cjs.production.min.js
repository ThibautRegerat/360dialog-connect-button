"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=require("react"),t=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,o=null,r=null,a=function(e,n){e.origin==n&&(window.location.search=""+e.data)},i=["className","partnerId","callback","requestedNumber","label","env","queryParameters"];exports.ConnectButton=function(e){var s=e.className,c=e.partnerId,l=e.callback,u=e.requestedNumber,d=e.label,p=void 0===d?"Connect 360dialog":d,f=e.env,g=void 0===f?"prod":f,b=e.queryParameters,w=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n.indexOf(t=a[o])>=0||(r[t]=e[t]);return r}(e,i),v=("local"===g?"http://0.0.0.0:8082":"staging"===g&&"https://admin.hub-staging.360dialog.io")||"rc"===g&&"https://rc-admin.360dialog.io"||"https://hub.360dialog.com",h=u?v+"/dashboard/app/"+c+"/permissions?number="+u:v+"/dashboard/app/"+c+"/permissions";if(b){var m=Object.values(b);Object.keys(b).forEach((function(e,n){h=0!==n||u?h+"&"+e+"="+m[n]:h+"?"+e+"="+m[n]}))}var k=function(e,n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+n+"=([^&#]*)").exec(e);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))};return n.useEffect((function(){var e=window.location.search,n=k(e,"client"),t=k(e,"channels"),o=k(e,"revoked");if(n&&t){var r={client:n,channels:t.substring(1,t.length-1).split(",")};if(o){var a=o.substring(1,o.length-1).split(",");r.revokedChannels=a}l(r)}window.opener&&(window.opener.postMessage(e),window.close())}),[]),t.createElement("button",Object.assign({className:s||"360dialog-connect-button",onClick:function(){return function(e,n,t){window.removeEventListener("message",a);var i="toolbar=no, menubar=no, width=600, height=900, top=100, left=100";null===o||o.closed?o=window.open(e,n,i):r!==e?(o=window.open(e,n,i)).focus():o.focus(),window.addEventListener("message",(function(e){return a(e,t)}),!1),r=e}(h,"connect-360dialog",window.location.origin)}},w),p)};
//# sourceMappingURL=dialog-connect-button.cjs.production.min.js.map
